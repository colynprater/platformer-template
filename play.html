<html>

<body>
  <div id="wrapper">
    <canvas id="gameCanvas" width="1400", height="800"></canvas>
  </div>

</body>

<script src="js/models.js"></script>
<script src="js/resolver.js"></script>
<script src="js/collisions.js"></script>
<script src="js/update.js"></script>
<script src="js/listeners.js"></script>
<script src="js/draw.js"></script>
<script src="js/utils.js"></script>

<script>
const PLAYER_WIDTH      = 20;
const PLAYER_HEIGHT     = 35;
const PLAYER_MAX_SPEED  = 6;
const PLAYER_ACCEL      = 2;
const PLAYER_SLOW_RATE  = 0.75;
const TERMINAL_VELOCITY = 25;
const GRAVITY           = 0.75;
const JUMP_POWER        = 11.5;

var wrapper = document.getElementById('wrapper')

var canvas;
var ctx;

var player;

var player = new Player({x: 0, y: 0});
var collidables = [];

window.onload = function() {
  canvas = document.getElementById('gameCanvas');
  ctx = canvas.getContext('2d');

  initCollidables();
  initPlayer();

  var framesPerSecond = 60;

  document.addEventListener('keydown', keyDownListener);
  document.addEventListener('keyup', keyUpListener);

  setInterval(function() {
    update();
    draw();
  }, 1000/framesPerSecond)
}

function update() {
  decreasePlayerMomentum();
  movePlayer();
  expireJump();
  increasePlayerPlummet();
  groundPlayer();
  dropPlayer();
  collideHorizontally();
  collideVertically();
}

function draw() {
  colourRect(0, 0, canvas.width, canvas.height, 'black') // Background
  drawPlayer();
  drawCollidables();
}

function initCollidables() {
  collidables.push(new Collidable({
    x: (canvas.width / 6),
    y: (canvas.height / 6) * 2,
    width: 100,
    height: 50,
    colour: 'red'
  }))

  collidables.push(new Collidable({
    x: 450,
    y: (canvas.height / 2) + 40,
    width: 100,
    height: 50,
    colour: 'green'
  }))

  collidables.push(new Collidable({
    x: (canvas.width / 2) - 150,
    y: (canvas.height / 2),
    width: 100,
    height: 50,
    colour: 'white'
  }))

  collidables.push(new Collidable({
    x: (canvas.width / 2) + 20,
    y: (canvas.height / 3) + 60,
    width: 100,
    height: 20,
    colour: 'purple'
  }))

  collidables.push(new Collidable({
    x: (canvas.width / 2) + 150,
    y: (canvas.height / 5) * 3,
    width: 280,
    height: 20,
    colour: 'yellow'
  }))

  collidables.push(new Collidable({
    x: (canvas.width / 2) + 400,
    y: (canvas.height / 5) * 2.5,
    width: 100,
    height: 20,
    colour: 'brown'
  }))
}

function initPlayer() {
  player.x = 450;
  player.y = (canvas.height / 6) * 1;
  player.width = PLAYER_WIDTH;
  player.height = PLAYER_HEIGHT;
  player.colour = 'blue';
}

</script>

<style>
  body {
    color: white;
    text-align: center;
    background-color: black;
  }
  canvas {
    margin: 12px;
    border-style: solid;
    border-color: white;
  }
  #wrapper {

  }
</style>
</html>
